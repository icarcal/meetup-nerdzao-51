<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Chat with Node.js + Socket.io</title><meta name="description" content="Icaro Caldeira Carreira / @icarcal"><meta name="author" content="You"><meta property="og:type" content="http://icarcal.github.io/meetup-nerdzao-51"><meta property="og:image" content="https://avatars2.githubusercontent.com/u/11530480?s=460&amp;v=4"><meta property="og:description" content="Chat with Node.js + Socket.io"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" type="text/css" href="css/main.css"><link rel="stylesheet" type="text/css" href="css/theme.css"><link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><script>if ( window.location.search.match( /print-pdf/gi )) {
  var link = document.createElement( 'link' );
  link.rel = 'stylesheet';
  link.type = 'text/css';
  link.href = window.location.search.match( /print-pdf/gi ) ? 'css/pdf.css' : 'css/paper.css';
  document.getElementsByTagName( 'head' )[0].appendChild( link );
}</script></head><body><div class="reveal"><div class="slides"><section><h3>Chat with Node.js + Socket.io</h3><h5><a href="https://www.linkedin.com/in/icarocaldeira/">Icaro Caldeira Carreira</a> /<a href="https://github.com/icarcal"> @icarcal</a></h5></section><section><h2 class="title">Icaro Caldeira Carreira</h2><ul><li>CTO @ <a href="https://itmodel.com"> It Model </a></li><li>8+ XP em desenvolvimento</li><li>Community manager</li><li>Speaker</li></ul></section><section><section><h2 class="title">Socket.io</h2></section><section><h3 class="title">O que é?</h3><blockquote class="fragment">“THE FASTEST AND MOST RELIABLE REAL-TIME ENGINE“
</blockquote><blockquote class="fragment">“It enables real-time bidirectional event-based communication“
</blockquote></section><section><h3>Framework para real-time apps escrito para o <a href="https://github.com/socketio/engine.io">Engine.io</a></h3></section></section><section><section><h3 class="title">Como o socket.io funciona?</h3></section><section data-background="img/magic.gif"></section><section><ul><li>Primeiro o socket.io decide qual transporte vai utilizar<ul class="fragment"><li><i>xhr-polling</i></li><li><i>jsonp-polling</i></li><li><i>websocket</i></li></ul></li></ul></section><section><ul><li>Em seguida é feito o <i>handshake</i>(via POST) entre cliente e servidor e são gerados os seguintes dados:</li><ul class="fragment"><li>Id da sessão</li><li>Número de segundos para o próximo <i>heartbeat</i></li><li>Número de segundos que a conexão ficará aberta se não houver nenhum transporte de dados nessa conexão</li></ul></ul></section><section><h3>O comportamento da conexão após o <i class="title">handshake</i> é determinada pela layer de transporte</h3></section><section><h3>Após este processo já é possível efetuar a troca e informações entre cliente e servidor</h3></section></section><section data-notes=""><section><h3 class="title">Pooling e Long pooling?</h3></section><section><h3 class="title">Pooling</h3><h4>É  a técnica onde o cliente consulta de x em x tempo por alguma mudança de status no servidor
</h4></section><section data-background="img/been-there.gif"></section><section><h3 class="title">Long pooling</h3><h4>O cliente envia apenas uma requisição ao servidor que a mantém aberta até o momento de retornar dados.</h4><h4>Quando os dados são retornados ao cliente, ele envia uma nova requisição ao server que novamente a mantém aberta.</h4></section></section><section data-notes=""><section><h3 class="title">O que é um websocket?</h3></section><section><h3>É uma conexão persistente (um túnel) entre o cliente e o servidor.</h3></section><section><h3>Possui por característica uma url com prefixo ws: ou wss:</h3></section></section><section><section><h3 class="title">Socket.io features</h3></section><section><h3 class="title">Confiabilidade</h3><h4>Funciona mesmo na presençca de load balancers, proxies, firewalls e anti-vírus</h4></section><section><h3 class="title">Suporte à reconexão</h3><h4>O socket.io tentará sempre efetuar a reconexão em caso de queda do servidor</h4></section><section><h4 class="title">Detecção de desconexão</h4><h4>Mecanismo de heartbeat</h4></section><section><h3 class="title">Suporte à arquivos binários</h3><h4>Qualquer aruivo pode ser enviado, até mesmo buffers(node.js) e blobs(browser)</h4></section><section><h4 class="title">API simples</h4><pre><code class="javascript">io.on('connection', function(socket){
  // emit an event to the socket
  socket.emit('request', /* */);
  // emit an event to all connected sockets
  io.emit('broadcast', /* */);

  // listen to the event
  socket.on('reply', function(){ /* */ });
});
</code></pre></section><section><h4 class="title">Cross-browser</h4><img src="img/socket-browsers.svg" style="background-color:#fff;"></section><section><h3 class="title">Suporte à multiplexing</h3><h4>O socket.io permite você criar <i>namespaces</i>, que funcionam como canais mas compartilham a mesma conexão</h4></section><section><h3 class="title">Suporte à salas</h3><h4>Dentro de cada <i>namespace</i>, você ainda pode criar salas, que os usuários podem entrar ou sair.</h4><h4>Esta <i>feature</i> é útil para que você possa fazer o envio de uma mensagem para um erto grupo de usuários</h4></section><section data-background="img/wow.gif"></section></section><section><h2 class="title">Demo</h2></section><section><h2>Alternativas</h2><h3 class="fragment"><a href="https://pusher.com/">Pusher</a></h3><h3 class="fragment"><a href="https://faye.jcoglan.com/">Faye</a></h3><h3 class="fragment"><a href="https://firebase.google.com/">Firebase</a></h3></section><section><h2 class="title">Referências</h2><p class="small"><i>https://github.com/socketio/engine.io</i></p><p class="small"><i>https://github.com/socketio/socket.io</i></p><p class="small"><i>https://socket.io/docs/</i></p><p class="small"><i>https://www.pubnub.com/blog/2014-12-01-http-long-polling/</i></p><p class="small"><i>https://codeburst.io/why-you-don-t-need-socket-io-6848f1c871cd/</i></p><p class="small"><i>http://websocket.org/aboutwebsocket.html</i></p></section><section><h3 class="title">Dúvidas?</h3><img src="img/questions.gif"></section><section><h2>@icarcal</h2><a href="https://github.com/icarcal" target="_blank"><i style="margin-right:20px" class="fa fa-github"></i></a><a href="https://medium.com/@icarcal" target="_blank"><i style="margin-right:20px" class="fa fa-medium"></i></a><a href="https://www.facebook.com/icarcal" target="_blank"><i style="margin-right:20px" class="fa fa-facebook"></i></a><a href="https://twitter.com/icarcal" target="_blank"><i style="margin-right:20px" class="fa fa-twitter"></i></a><a href="https://www.linkedin.com/in/icarocaldeira/" target="_blank"><i class="fa fa-linkedin"></i></a></section><section><h2 class="title">Obrigado <span style="color:red">♥</span></h2><img src="img/thanks.gif"></section></div></div><script src="js/vendor/head.min.js"></script><script src="js/vendor/reveal.js"></script><script src="js/main.js"></script></body></html>